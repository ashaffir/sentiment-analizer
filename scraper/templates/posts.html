{% extends 'base.html' %}

{% block title %}
Posts
{% endblock  %}
{% block content %}
    <h1>Posts</h1>
    <hr>
    <h3>Create Post</h3>
    <div class="row">
        <div class="col-md-6">
            <form action="{{ url_for('posts') }}" method="POST" enctype="multipart/form-data" class="form-group post-form">
                <input type="text" name="title" class="form-control" placeholder="Title">
                <textarea type="text" name="content" class="form-control" placeholder="Content"></textarea>
                <input type="text" name="author" class="form-control" placeholder="Author">
                <button class="btn btn-lg btn-success" >Submit Post</button>
            </form>
        </div>
    </div>
    <hr>
    <form action="{{ url_for('posts') }}" method="POST" enctype="multipart/form-data" class="form-group">
        <div class="row">
            <div class="col-md-2">
                <button class="btn btn-md btn-primary" type="submit" name="filter">Filter by</button>
            </div>
            <div class="col-md-3">
                <input type="text" name="filter_by" class="form-control" style="margin-top: 2rem;">
            </div>
        </div>
    </form>
    <div class="row">
        <div class="col-md-12 posts">
            <form action="{{ url_for('posts') }}" method="POST" enctype="multipart/form-data">
                {% for post in context.posts %}
                    <div class="row mt-3">
                        <div class="col-md-8">
                            <h6 class="mb-3">Title: {{ post.title }} <span>(posted on: {{ post.post_date }})</span></h6>
                            <p>{{ post.content }}</p>
                            <hr>
                            <label for="">Author: {{ post.author }}</label>
                        </div>
                        <button class="btn btn-sm btn-danger" type="submit" name="delete_post" value="{{ post.id }}">
                            <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                        <a href="{{ url_for('post', postId=post.id) }}" class="btn btn-sm btn-primary" type="submit" name="edit_post" style="margin-top: 2rem;">
                            <i class="fa fa-edit" aria-hidden="true"></i>
                        </a>
                    </div>
                    <hr>
                {% endfor %}
            </form>
        </div>
    </div>
{% endblock content %}
